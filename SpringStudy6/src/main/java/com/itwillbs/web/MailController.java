package com.itwillbs.web;

import javax.inject.Inject;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.scheduling.annotation.EnableAsync;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.itwillbs.service.MailService;

//@EnableAsync
//=> 메서드(동작)가 호출될때 비동기로 처리가능하게 설정

@Controller
@EnableAsync
public class MailController {
	
	private static final Logger logger = LoggerFactory.getLogger(MailController.class);
	
	@Inject
	private MailService mService;
	
	// http://localhost:8088/sendMail
	@RequestMapping(value = "/sendMail",method = RequestMethod.GET)
	public String sendMail() throws Exception {
		
		logger.info(" sendMail() 실행 메일 전송! ");
		
		StringBuffer sb = new StringBuffer();
		sb.append("<html>");
		sb.append("<head>");
		sb.append("</head>");
		sb.append("<body>");
		sb.append(" <h1> ITWILL 메일 전송 </h1> ");
		sb.append(" <img src='data:image/png;base64,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'>");
		sb.append("");
		sb.append("");
		sb.append("</body>");
		sb.append("</html>");
		
		//mService.sendMail("wldwpdwhd2ek@naver.com", "테스트 메일 제목", "테스트 메일 내용");
		mService.sendMail("wldwpdwhd2ek@naver.com", "테스트 메일 제목", sb.toString());
		
		logger.info(" 메일 전송 완료! ");
		
		return "redirect:/resultMail";
		
	}
	
	
}
